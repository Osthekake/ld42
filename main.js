!function(t){function e(e){for(var o,s,a=e[0],u=e[1],l=e[2],h=0,p=[];h<a.length;h++)s=a[h],r[s]&&p.push(r[s][0]),r[s]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(t[o]=u[o]);for(c&&c(e);p.length;)p.shift()();return n.push.apply(n,l||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],o=!0,a=1;a<i.length;a++){var u=i[a];0!==r[u]&&(o=!1)}o&&(n.splice(e--,1),t=s(s.s=i[0]))}return t}var o={},r={1:0},n=[];function s(e){if(o[e])return o[e].exports;var i=o[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=o,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},s.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var a=window.webpackJsonp=window.webpackJsonp||[],u=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var c=u;n.push([30,0]),i()}([,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(0);e.Textures={Sword:new o.Texture(i(27)),SpeechBubble:new o.Texture(i(26)),Button:new o.Texture(i(25)),Panel:new o.Texture(i(24)),ArrowRight:new o.Texture(i(23)),ArrowLeft:new o.Texture(i(22)),Rocket:new o.Texture(i(21)),TV:new o.Texture(i(20)),Sofa:new o.Texture(i(19)),Lamp:new o.Texture(i(18)),WoodTile:new o.Texture(i(17)),BrickTile:new o.Texture(i(16)),SmallThruster:new o.Texture(i(15)),RadialThruster:new o.Texture(i(14)),Background:new o.Texture(i(13)),Goal:new o.Texture(i(12))},e.Levels={Level1:i(11),Level2:i(10),Level3:i(9),Level4:i(8),Level5:i(7)}},function(t,e,i){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),s=i(1),a=function(t){function e(e,i,o){var r=t.call(this,{x:e,y:i,scale:o,collisionType:n.CollisionType.Passive})||this,a=s.Textures.Goal;return r.addDrawing(a),r.addCollisionGroup("furniture"),r.setWidth(a.width/2),r.setHeight(a.height/2),r}return r(e,t),e.prototype.onInitialize=function(t){this.on("collisionstart",function(t){var e=t.other;e.inGoal&&e.inGoal()})},e}(n.Actor);e.Goal=a},function(t,e,i){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),s=i(0),a=i(1),u=function(t){function e(e){var i=t.call(this,{x:1025,y:625})||this;i.level=e,i.isRunning=!1,i.isReset=!0;var o=a.Textures.Button;return i.addDrawing(o),i.setWidth(o.width),i.setHeight(o.height),i.label=new n.Label({x:o.width/2,y:.55*o.height,text:"Ignition!",fontFamily:"Arial",fontSize:20,textAlign:n.TextAlign.Center,color:n.Color.Orange}),i.add(i.label),i.on("pointerdown",i.onClick),i}return r(e,t),e.prototype.onClick=function(t){this.isRunning?this.stop():this.isReset?this.start():this.reset()},e.prototype.start=function(){this.isRunning=!0,this.isReset=!1,this.label.text="Cut engines",this.level.start()},e.prototype.stop=function(){this.isRunning=!1,this.label.text="Reset level",this.level.stop()},e.prototype.reset=function(){this.isReset=!0,this.label.text="Ignition!",this.level.reinitializeFurniture()},e}(s.UIActor);e.StartButton=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(0);e.vectorDifference=function(t,e){var i=t.x-e.x,r=t.y-e.y;return new o.Vector(i,r)}},function(t,e,i){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),s=i(0),a=i(4),u=function(t){function e(e,i){void 0===i&&(i="linear");var o=t.call(this,50,0,e.width,e.height)||this;switch(o.texture=e,o.attachment=i,o.thrust=new s.Vector(-150,0),o.isRunning=!1,o.isDragging=!1,o.collisionType=n.CollisionType.Active,o.attachment){case"linear":o.emitterOffset=new s.Vector(10,0);break;case"radial_clockwise":o.emitterOffset=new s.Vector(25,-5);break;case"radial_counterClockwise":o.emitterOffset=new s.Vector(25,5)}return o}return r(e,t),e.prototype.updateAttachment=function(t){switch(this.pos=t.clone(),this.attachment){case"linear":this.rotation=this.pos.toAngle();break;case"radial_clockwise":this.rotation=this.pos.toAngle()+Math.PI/2;break;case"radial_counterClockwise":this.rotation=this.pos.toAngle()-Math.PI/2}},e.prototype.onInitialize=function(t){var e=this,i=new s.SpriteSheet(this.texture,1,1,this.texture.width,this.texture.height).getAnimationForAll(t,125);this.addDrawing("idle",i),i.flipVertical="radial_counterClockwise"===this.attachment,this.enableCapturePointer=!0,this.on("pointerdown",function(){return e.isDragging=!0}),this.on("pointerdragend",function(){return e.isDragging=!1}),this.emitter=new n.ParticleEmitter({emitterType:n.EmitterType.Circle,radius:5,minVel:100,maxVel:400,minAngle:.3*Math.PI,maxAngle:.7*Math.PI,emitRate:300,opacity:.5,fadeFlag:!0,particleLife:1e3,maxSize:10,minSize:1,beginColor:n.Color.fromRGB(255,100,50),endColor:n.Color.fromRGB(240,240,0)}),this.emitter.isEmitting=!1,t.add(this.emitter)},e.prototype.angularAbs=function(t){for(;t<0;)t+=2*Math.PI;for(;t>2*Math.PI;)t-=2*Math.PI;return t},e.prototype.start=function(){this.isRunning=!0,this.emitter.isEmitting=!0},e.prototype.stop=function(){this.isRunning=!1,this.emitter.isEmitting=!1},e.prototype.totalAngle=function(){return this.rotation+this.parent.rotation},e.prototype.getThrust=function(){return this.thrust.clone().rotate(this.totalAngle())},e.prototype.getTorque=function(){switch(this.attachment){case"linear":return 100*Math.sin(this.totalAngle());case"radial_clockwise":return this.getThrust().magnitude()*this.pos.magnitude()*-1;case"radial_counterClockwise":return this.getThrust().magnitude()*this.pos.magnitude()}},e.prototype.update=function(e,i){if(t.prototype.update.call(this,e,i),this.isRunning){var o=this.emitterOffset.rotate(this.rotation).add(this.pos).rotate(this.parent.rotation);this.emitter.pos=this.parent.pos.clone().add(o),this.emitter.rotation=this.totalAngle(),this.emitter.minAngle=this.emitter.rotation-.2,this.emitter.maxAngle=this.emitter.rotation+.2,this.emitter.vel=this.vel}else if(this.isDragging)if(e.input.pointers.primary.isDragging){var r=e.input.pointers.primary.lastPagePos.add(new s.Vector(this.getWidth()/-2,this.getHeight()/-2)),n=a.vectorDifference(r,this.parent.pos);n.magnitude()>70&&(n=n.normalize().scale(70)),this.updateAttachment(n)}else this.isDragging=!1},e}(n.Actor);e.Thruster=u},function(t,e,i){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),s=i(0),a=function(t){function e(e,i,o){var r=t.call(this,e,i,.8*o.width,.8*o.height)||this;return r.gravity=new s.Vector(0,80),r.thrusters=[],r.isInGoal=!1,r.addDrawing(o),r.collisionType=n.CollisionType.Active,r}return r(e,t),e.prototype.onInitialize=function(t){this.color=new n.Color(255,255,255),this.friction=1,this.mass=1,this.enableCapturePointer=!1,this.addCollisionGroup("furniture"),this.addCollisionGroup("walls")},e.prototype.onPostUpdate=function(e,i){t.prototype.onPostUpdate.call(this,e,i),this.torque=0,this.acc=s.Vector.Zero},e.prototype.update=function(e,i){var o=this;t.prototype.update.call(this,e,i),this.acc=this.gravity.clone(),this.isRunning&&this.thrusters.forEach(function(t){o.acc=o.acc.add(t.getThrust()),o.torque+=t.getTorque()})},e.prototype.addThruster=function(t){this.add(t),this.thrusters.push(t)},e.prototype.start=function(){this.isRunning=!0,this.thrusters.forEach(function(t){t.start()}),this.isInGoal=!1},e.prototype.stop=function(){this.isRunning=!1,this.thrusters.forEach(function(t){t.stop()})},e.prototype.inGoal=function(){var t=this;this.isInGoal||(this.isInGoal=!0,setTimeout(function(){t.stop(),t.kill(),console.log("gone")},1e3),console.log("in goal!"))},e}(n.Actor);e.Furniture=a},function(t){t.exports={walls:[{tile:"BrickTile",x:0,y:8,width:2,height:16},{tile:"BrickTile",x:14,y:4,width:2,height:5},{tile:"BrickTile",x:14,y:12,width:2,height:6},{tile:"WoodTile",x:6,y:10,width:9,height:2},{tile:"WoodTile",x:18,y:10,width:10,height:2}],furniture:[{texture:"Lamp",x:4,y:8,boosters:[{texture:"SmallThruster",attachment:"linear"}]},{texture:"TV",x:7,y:8,boosters:[{texture:"SmallThruster",attachment:"linear"}]},{texture:"Sofa",x:18,y:8,boosters:[{texture:"SmallThruster",attachment:"linear"}]}],goal:{x:10,y:14,scale:1},next:"Level1"}},function(t){t.exports={walls:[{tile:"BrickTile",x:0,y:8,width:2,height:16},{tile:"BrickTile",x:14,y:4,width:2,height:5},{tile:"BrickTile",x:14,y:12,width:2,height:6},{tile:"WoodTile",x:12,y:16,width:26,height:2}],furniture:[{texture:"TV",x:4,y:14,boosters:[{texture:"SmallThruster",attachment:"linear"}]},{texture:"TV",x:7,y:14,boosters:[{texture:"SmallThruster",attachment:"linear"}]},{texture:"Sofa",x:10,y:14,boosters:[{texture:"SmallThruster",attachment:"linear"}]}],goal:{x:18,y:8,scale:1},next:"Level5"}},function(t){t.exports={walls:[{tile:"BrickTile",x:0,y:8,width:2,height:16},{tile:"BrickTile",x:14,y:4,width:2,height:5},{tile:"BrickTile",x:14,y:12,width:2,height:6},{tile:"WoodTile",x:12,y:16,width:26,height:2}],furniture:[{texture:"Sofa",x:6,y:14,boosters:[{texture:"RadialThruster",attachment:"radial_clockwise"},{texture:"RadialThruster",attachment:"radial_counterClockwise",offset:3.14}]}],goal:{x:18,y:8,scale:1},next:"Level4"}},function(t){t.exports={walls:[{tile:"BrickTile",x:0,y:8,width:2,height:16},{tile:"BrickTile",x:14,y:4,width:2,height:5},{tile:"BrickTile",x:14,y:12,width:2,height:6},{tile:"WoodTile",x:12,y:16,width:26,height:2}],furniture:[{texture:"TV",x:4,y:14,boosters:[{texture:"SmallThruster",attachment:"linear"}]}],goal:{x:18,y:8,scale:1},next:"Level3"}},function(t){t.exports={walls:[{tile:"BrickTile",x:0,y:8,width:2,height:16},{tile:"BrickTile",x:18.5,y:8,width:3,height:16},{tile:"WoodTile",x:12,y:16,width:26,height:2}],furniture:[{texture:"TV",x:4,y:14,boosters:[{texture:"SmallThruster",attachment:"linear"}]}],goal:{x:14,y:12,scale:1},next:"Level2"}},function(t,e,i){t.exports=i.p+"c7f1e54ea98d593cadf6029fc7cb97eb.png"},function(t,e,i){t.exports=i.p+"34cd666ca694089b9f395b3aaf8f4a97.png"},function(t,e,i){t.exports=i.p+"b40f9ed65d85846c635606d82eba9fc5.png"},function(t,e,i){t.exports=i.p+"9e0101f93b00123d7827621590de6015.png"},function(t,e,i){t.exports=i.p+"06608a725ce9ebc2887b58f1414c0316.png"},function(t,e,i){t.exports=i.p+"cb46cb082cd78ed7b0fbfa505c7e1f8c.png"},function(t,e,i){t.exports=i.p+"f9ab6fe1ec0e33eb363098eba1a84b54.png"},function(t,e,i){t.exports=i.p+"9806376f3a930e97ad533761548d452c.png"},function(t,e,i){t.exports=i.p+"bf34c1237c916cd80b5c32c7c293c416.png"},function(t,e,i){t.exports=i.p+"cdf03495cb0cdd6a36afb16dc4e48501.png"},function(t,e,i){t.exports=i.p+"fb7505dcfc9d54fd52b0844e6da988ec.png"},function(t,e,i){t.exports=i.p+"2385186871491075e0762c210949c9eb.png"},function(t,e,i){t.exports=i.p+"1e9685280b55383803c4817ab517672e.png"},function(t,e,i){t.exports=i.p+"3ea5e186b643048c752aaa1edd750eb3.png"},function(t,e,i){t.exports=i.p+"76fe2fe86a2023c6feb474400b68b94a.png"},function(t,e,i){t.exports=i.p+"94754f62e0ae4d23d386e246f5e0cb6e.png"},function(t,e,i){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),s=i(0),a=function(t){function e(e,i,o,r,a){var u=t.call(this,e,i,o,r,s.Color.DarkGray)||this;u.width=o,u.height=r,u.tileSet=a,u.friction=1,u.collisionType=n.CollisionType.Fixed;var l=new s.SpriteSheet(u.tileSet,3,3,50,50);return u.topLeft=l.getSprite(0),u.topMiddle=l.getSprite(1),u.topRight=l.getSprite(2),u.middleLeft=l.getSprite(3),u.middle=l.getSprite(4),u.middleRight=l.getSprite(5),u.bottomLeft=l.getSprite(6),u.bottomMiddle=l.getSprite(7),u.bottomRight=l.getSprite(8),u.addCollisionGroup("walls"),u}return r(e,t),e.prototype.draw=function(t,e){for(var i=this.pos.x+this.getWidth()/-2,o=this.pos.y+this.getHeight()/-2,r=this.pos.x+this.getWidth()/2,n=this.pos.y+this.getHeight()/2,s=i;s<r;s+=50)for(var a=o;a<n;a+=50)(a===o?s===i?this.topLeft:s>=r-50?this.topRight:this.topMiddle:a>=n-50?s===i?this.bottomLeft:s>=r-50?this.bottomRight:this.bottomMiddle:s===i?this.middleLeft:s>=r-50?this.middleRight:this.middle).draw(t,s,a)},e}(n.Actor);e.Tile=a},function(t,e,i){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),s=i(0),a=i(28),u=i(1),l=i(6),c=i(5),h=i(3),p=i(2),f=function(t){function e(e){var i=t.call(this)||this;return i.levelData=e,i.isRunning=!1,i.tiles=[],i.furniture=[],i}return r(e,t),e.prototype.onInitialize=function(t){var e=this,i=t.canvasWidth,o=t.canvasHeight,r=new s.Actor({x:i/2,y:o/2,collisionType:n.CollisionType.PreventCollision});r.addDrawing(u.Textures.Background),this.add(r),this.levelData.walls.forEach(function(t){var i=new a.Tile(50*t.x,50*t.y,50*t.width,50*t.height,u.Textures[t.tile]);e.tiles.push(i),e.add(i)}),this.loadFurniture(),this.startButton=new h.StartButton(this),this.add(this.startButton),this.goal=new p.Goal(50*this.levelData.goal.x,50*this.levelData.goal.y,new s.Vector(this.levelData.goal.scale,this.levelData.goal.scale)),this.add(this.goal)},e.prototype.onActivate=function(){this.reinitializeFurniture(),this.isRunning=!1,this.startButton.isReset=!0,this.startButton.isRunning=!1},e.prototype.onDeactivate=function(){this.isRunning=!1,this.startButton.reset()},e.prototype.loadFurniture=function(){var t=this;this.levelData.furniture.forEach(function(e){var i=new l.Furniture(50*e.x,50*e.y,u.Textures[e.texture]);t.furniture.push(i),e.boosters.forEach(function(t){var e=new c.Thruster(u.Textures[t.texture],t.attachment);t.offset&&(e.rotation=t.offset,e.pos=e.pos.rotate(t.offset)),i.addThruster(e)}),t.add(i)})},e.prototype.reinitializeFurniture=function(){var t=this;this.furniture.forEach(function(e){t.remove(e),e.kill()}),this.furniture=[],this.loadFurniture(),this.endTimer=void 0},e.prototype.start=function(){this.furniture.forEach(function(t){return t.start()}),this.isRunning=!0},e.prototype.stop=function(){this.furniture.forEach(function(t){return t.stop()}),this.isRunning=!1},e.prototype.update=function(e,i){var o=this;t.prototype.update.call(this,e,i),!this.endTimer&&this.furniture.every(function(t){return t.isInGoal})&&(console.log("level complete"),setTimeout(function(){console.log("next level"),e.goToScene(o.levelData.next)},1500))},e}(n.Scene);e.Level=f},function(t,e,i){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),s=i(29),a=i(1),u=i(0),l=function(t){function e(){var e=t.call(this,{width:1200,height:800,displayMode:n.DisplayMode.Fixed})||this;for(var i in a.Levels){var o=a.Levels[i],r=new s.Level(o);e.add(i,r)}return e}return r(e,t),e.prototype.start=function(e){return t.prototype.start.call(this,e)},e}(n.Engine);u.Physics.useRigidBodyPhysics();var c=new l,h=new n.Loader;for(var p in a.Textures)h.addResource(a.Textures[p]);c.start(h).then(function(){c.goToScene("Level1")})}]);
//# sourceMappingURL=main.js.map